/*!
 * (C) BKKR Framework https://bkkr-team.github.io/bkkr-docs/ - MIT License
 */
import{M as t}from"./p-c60e44a7.js";import{c as n}from"./p-6518e4d1.js";import{c as r}from"./p-5548d179.js";const a=()=>r().duration(400),e=t=>{let n,e;const s=t.width+8,o=r(),i=r();return t.isEndSide?(n=s+"px",e="0px"):(n=-s+"px",e="0px"),o.addElement(t.menuNativeEl).fromTo("transform",`translateX(${n})`,`translateX(${e})`),i.addElement(t.backdropEl).fromTo("opacity","0","var(--backdrop-opacity)"),a().addAnimation([o,i])},s=t=>{let n,e;const s=t.width;t.isEndSide?(n=-s+"px",e=s+"px"):(n=s+"px",e=-s+"px");const o=r().addElement(t.menuNativeEl).fromTo("transform",`translateX(${e})`,"translateX(0px)"),i=r().addElement(t.contentEl).fromTo("transform","translateX(0px)",`translateX(${n})`),c=r().addElement(t.backdropEl).fromTo("opacity","0","var(--backdrop-opacity)");return a().addAnimation([o,i,c])},o=t=>{const n=t.width*(t.isEndSide?-1:1)+"px",e=r().addElement(t.contentEl).fromTo("transform","translateX(0px)",`translateX(${n})`);return a().addAnimation(e)},i=(()=>{const r=new Map,a=[],i=async t=>{if(await w(),"start"===t||"end"===t){return y((n=>n.side===t&&!n.disabled))||y((n=>n.side===t))}if(null!=t)return y((n=>n.menuId===t));return y((t=>!t.disabled))||(a.length>0?a[0].el:void 0)},c=async()=>(await w(),m()),p=(t,n)=>{r.set(t,n)},u=t=>{const n=t.side;a.filter((r=>r.side===n&&r!==t)).forEach((t=>t.disabled=!0))},m=()=>y((t=>t._isOpen)),l=()=>a.some((t=>t.isAnimating)),y=t=>{const n=a.find(t);if(void 0!==n)return n.el},w=()=>Promise.all(Array.from(document.querySelectorAll("bkkr-menu")).map((t=>new Promise((r=>n(t,r))))));return p("reveal",o),p("push",s),p("overlay",e),"undefined"!=typeof document&&document.addEventListener("bkkrBackButton",(n=>{const r=m();r&&n.detail.register(t,(()=>r.close()))})),{registerAnimation:p,get:i,getMenus:async()=>(await w(),a.map((t=>t.el))),getOpen:c,isEnabled:async t=>{const n=await i(t);return!!n&&!n.disabled},swipeGesture:async(t,n)=>{const r=await i(n);return r&&(r.swipeGesture=t),r},isAnimating:async()=>(await w(),l()),isOpen:async t=>{if(null!=t){const n=await i(t);return void 0!==n&&n.isOpen()}return void 0!==await c()},enable:async(t,n)=>{const r=await i(n);return r&&(r.disabled=!t),r},toggle:async t=>{const n=await i(t);return!!n&&n.toggle()},close:async t=>{const n=await(void 0!==t?i(t):c());return void 0!==n&&n.close()},open:async t=>{const n=await i(t);return!!n&&n.open()},_getOpenSync:m,_createAnimation:(t,n)=>{const a=r.get(t);if(!a)throw new Error("animation not registered");return a(n)},_register:t=>{a.indexOf(t)<0&&(t.disabled||u(t),a.push(t))},_unregister:t=>{const n=a.indexOf(t);n>-1&&a.splice(n,1)},_setOpen:async(t,n,r)=>{if(l())return!1;if(n){const n=await c();n&&t.el!==n&&await n.setOpen(!1,!1)}return t._setOpen(n,r)},_setActiveMenu:u}})();export{i as m}