import{r as t,e as i,i as o,f as r,h as s,H as n,g as a}from"./p-8dbe4215.js";import{s as e,h as l}from"./p-09b2e663.js";const d=class{constructor(o){t(this,o),this.bkkrScrollStart=i(this,"bkkrScrollStart",7),this.bkkrScroll=i(this,"bkkrScroll",7),this.bkkrScrollEnd=i(this,"bkkrScrollEnd",7),this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.fullscreen=!1,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}onAppLoad(){this.resize()}onClick(t){this.isScrolling&&(t.preventDefault(),t.stopPropagation())}disconnectedCallback(){this.onScrollEnd()}resize(){this.fullscreen?o((()=>this.readDimensions())):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,r(this))}readDimensions(){const t=c(this.el),i=Math.max(this.el.offsetTop,0),o=Math.max(t.offsetHeight-i-this.el.offsetHeight,0);(i!==this.cTop||o!==this.cBottom)&&(this.cTop=i,this.cBottom=o,r(this))}onScroll(t){const i=Date.now(),r=!this.isScrolling;this.lastScroll=i,r&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,o((i=>{this.queued=!1,this.detail.event=t,h(this.detail,this.scrollEl,i,r),this.bkkrScroll.emit(this.detail)})))}getScrollElement(){return Promise.resolve(this.scrollEl)}scrollToTop(t=0){return this.scrollToPoint(void 0,0,t)}scrollToBottom(t=0){return this.scrollToPoint(void 0,this.scrollEl.scrollHeight-this.scrollEl.clientHeight,t)}scrollByPoint(t,i,o){return this.scrollToPoint(t+this.scrollEl.scrollLeft,i+this.scrollEl.scrollTop,o)}async scrollToPoint(t,i,o=0){const r=this.scrollEl;if(o<32)return null!=i&&(r.scrollTop=i),void(null!=t&&(r.scrollLeft=t));let s,n=0;const a=new Promise((t=>s=t)),e=r.scrollTop,l=r.scrollLeft,d=null!=i?i-e:0,c=null!=t?t-l:0,h=t=>{const i=Math.min(1,(t-n)/o)-1,a=Math.pow(i,3)+1;0!==d&&(r.scrollTop=Math.floor(a*d+e)),0!==c&&(r.scrollLeft=Math.floor(a*c+l)),a<1?requestAnimationFrame(h):s()};return requestAnimationFrame((t=>{n=t,h(t)})),a}onScrollStart(){this.isScrolling=!0,this.bkkrScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval((()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()}),100)}onScrollEnd(){clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.bkkrScrollEnd.emit({isScrolling:!1}))}render(){const{scrollX:t,scrollY:i}=this;return this.resize(),s(n,{class:e(this.color,{"content-sizing":l("bkkr-popover",this.el)})},s("main",{class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":i,overscroll:t||i},ref:t=>this.scrollEl=t,onScroll:this.scrollEvents?t=>this.onScroll(t):void 0,part:"scroll"},s("slot",null)),s("slot",{name:"fixed"}))}get el(){return a(this)}},c=t=>{const i=t.closest("bkkr-tabs");if(i)return i;return t.closest("bkkr-root,bkkr-page,.bkkr-page,page-inner")||(t=>t.parentElement?t.parentElement:t.parentNode&&t.parentNode.host?t.parentNode.host:null)(t)},h=(t,i,o,r)=>{const s=t.currentX,n=t.currentY,a=i.scrollLeft,e=i.scrollTop,l=o-t.currentTime;if(r&&(t.startTime=o,t.startX=a,t.startY=e,t.velocityX=t.velocityY=0),t.currentTime=o,t.currentX=t.scrollLeft=a,t.currentY=t.scrollTop=e,t.deltaX=a-t.startX,t.deltaY=e-t.startY,l>0&&l<100){const i=(e-n)/l;t.velocityX=(a-s)/l*.7+.3*t.velocityX,t.velocityY=.7*i+.3*t.velocityY}};d.style=".content,:host{--background:var(--bkkr-background-color);--color:var(--bkkr-text-color);--offset-top:0px;--offset-bottom:0px;--padding-top:calc(var(--bkkr-spacer, 16px) + var(--offset-top));--padding-end:0;--padding-bottom:calc(var(--bkkr-spacer, 16px) + var(--offset-bottom));--padding-start:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);display:block;position:relative;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;max-width:100%;height:100%;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1);contain:size style;overflow-x:hidden}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.content,:host{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.inner-scroll{top:calc(var(--offset-top) * -1);right:0;bottom:calc(var(--offset-bottom) * -1);left:0;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.inner-scroll{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;will-change:scroll-position, transform}.scroll-y{overflow-y:var(--overflow);-ms-touch-action:pan-y;touch-action:pan-y;overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);-ms-touch-action:pan-x;touch-action:pan-x;overscroll-behavior-x:contain}.scroll-x.scroll-y{-ms-touch-action:auto;touch-action:auto}:host(.content-sizing){contain:none}:host(.content-sizing) .inner-scroll{position:relative}::slotted([slot=fixed]){position:absolute}";export{d as bkkr_content}