import{c as t}from"./p-5ea482c8.js";import{c as n}from"./p-030c6588.js";const a=()=>n().duration(400),r=t=>{let r,e;const s=t.width+8,i=n(),o=n();return t.isEndSide?(r=s+"px",e="0px"):(r=-s+"px",e="0px"),i.addElement(t.menuInnerEl).fromTo("transform",`translateX(${r})`,`translateX(${e})`),o.addElement(t.backdropEl).fromTo("opacity","0","var(--backdrop-opacity)"),a().addAnimation([i,o])},e=t=>{let r,e;const s=t.width;t.isEndSide?(r=-s+"px",e=s+"px"):(r=s+"px",e=-s+"px");const i=n().addElement(t.menuInnerEl).fromTo("transform",`translateX(${e})`,"translateX(0px)"),o=n().addElement(t.contentEl).fromTo("transform","translateX(0px)",`translateX(${r})`),c=n().addElement(t.backdropEl).fromTo("opacity","0","var(--backdrop-opacity)");return a().addAnimation([i,o,c])},s=t=>{const r=t.width*(t.isEndSide?-1:1)+"px",e=n().addElement(t.contentEl).fromTo("transform","translateX(0px)",`translateX(${r})`);return a().addAnimation(e)},i=(()=>{const n=new Map,a=[],i=async t=>{if(await y(),"start"===t||"end"===t){return w((n=>n.side===t&&!n.disabled))||w((n=>n.side===t))}if(null!=t)return w((n=>n.menuId===t));return w((t=>!t.disabled))||(a.length>0?a[0].el:void 0)},o=async()=>(await y(),u()),c=(t,a)=>{n.set(t,a)},p=t=>{const n=t.side;a.filter((a=>a.side===n&&a!==t)).forEach((t=>t.disabled=!0))},u=()=>w((t=>t._isOpen)),l=()=>a.some((t=>t.isAnimating)),w=t=>{const n=a.find(t);if(void 0!==n)return n.el},y=()=>Promise.all(Array.from(document.querySelectorAll("bkkr-menu")).map((n=>new Promise((a=>t(n,a))))));return c("reveal",s),c("push",e),c("overlay",r),{registerAnimation:c,get:i,getMenus:async()=>(await y(),a.map((t=>t.el))),getOpen:o,isEnabled:async t=>{const n=await i(t);return!!n&&!n.disabled},swipeGesture:async(t,n)=>{const a=await i(n);return a&&(a.swipeGesture=t),a},isAnimating:async()=>(await y(),l()),isOpen:async t=>{if(null!=t){const n=await i(t);return void 0!==n&&n.isOpen()}return void 0!==await o()},enable:async(t,n)=>{const a=await i(n);return a&&(a.disabled=!t),a},toggle:async t=>{const n=await i(t);return!!n&&n.toggle()},close:async t=>{const n=await(void 0!==t?i(t):o());return void 0!==n&&n.close()},open:async t=>{const n=await i(t);return!!n&&n.open()},_getOpenSync:u,_createAnimation:(t,a)=>{const r=n.get(t);if(!r)throw new Error("animation not registered");return r(a)},_register:t=>{a.indexOf(t)<0&&(t.disabled||p(t),a.push(t))},_unregister:t=>{const n=a.indexOf(t);n>-1&&a.splice(n,1)},_setOpen:async(t,n,a)=>{if(l())return!1;if(n){const n=await o();n&&t.el!==n&&await n.setOpen(!1,!1)}return t._setOpen(n,a)},_setActiveMenu:p}})();export{i as m}