/*!
 * (C) BKKR Framework https://bkkr-team.github.io/bkkr-docs/ - MIT License
 */
import{r as t,c as o,e as i,f as r,h as s,H as a,g as n}from"./p-3b0af71a.js";import{c as l}from"./p-6518e4d1.js";import{s as e,h as c}from"./p-18201c80.js";let h=class{constructor(i){t(this,i),this.bkkrScrollStart=o(this,"bkkrScrollStart",7),this.bkkrScroll=o(this,"bkkrScroll",7),this.bkkrScrollEnd=o(this,"bkkrScrollEnd",7),this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.fullscreen=!1,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}onAppLoad(){this.resize()}connectedCallback(){this.isMainContent=null===this.el.closest("bkkr-menu, bkkr-popover, bkkr-modal, bkkr-drawer")}disconnectedCallback(){this.onScrollEnd()}resize(){this.fullscreen?i((()=>this.readDimensions())):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,r(this))}readDimensions(){const t=d(this.el),o=Math.max(this.el.offsetTop,0),i=Math.max(t.offsetHeight-o-this.el.offsetHeight,0);(o!==this.cTop||i!==this.cBottom)&&(this.cTop=o,this.cBottom=i,r(this))}onScroll(t){const o=Date.now(),r=!this.isScrolling;this.lastScroll=o,r&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,i((o=>{this.queued=!1,this.detail.event=t,p(this.detail,this.scrollEl,o,r),this.bkkrScroll.emit(this.detail)})))}async getScrollElement(){return this.scrollEl||await new Promise((t=>l(this.el,t))),Promise.resolve(this.scrollEl)}scrollToTop(t=0){return this.scrollToPoint(void 0,0,t)}async scrollToBottom(t=0){const o=await this.getScrollElement();return this.scrollToPoint(void 0,o.scrollHeight-o.clientHeight,t)}async scrollByPoint(t,o,i){const r=await this.getScrollElement();return this.scrollToPoint(t+r.scrollLeft,o+r.scrollTop,i)}async scrollToPoint(t,o,i=0){const r=await this.getScrollElement();if(i<32)return null!=o&&(r.scrollTop=o),void(null!=t&&(r.scrollLeft=t));let s,a=0;const n=new Promise((t=>s=t)),l=r.scrollTop,e=r.scrollLeft,c=null!=o?o-l:0,h=null!=t?t-e:0,d=t=>{const o=Math.min(1,(t-a)/i)-1,n=Math.pow(o,3)+1;0!==c&&(r.scrollTop=Math.floor(n*c+l)),0!==h&&(r.scrollLeft=Math.floor(n*h+e)),n<1?requestAnimationFrame(d):s()};return requestAnimationFrame((t=>{a=t,d(t)})),n}onScrollStart(){this.isScrolling=!0,this.bkkrScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval((()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()}),100)}onScrollEnd(){clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.bkkrScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:t,scrollX:o,scrollY:i}=this,r=t?"main":"div";return this.resize(),s(a,{class:e(this.color,{"content-sizing":c("bkkr-popover",this.el)}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},s(r,{class:{"inner-scroll":!0,"scroll-x":o,"scroll-y":i},ref:t=>this.scrollEl=t,onScroll:this.scrollEvents?t=>this.onScroll(t):void 0,part:"scroll"},s("slot",null)),s("slot",{name:"fixed"}))}get el(){return n(this)}};const d=t=>{const o=t.closest("bkkr-tabs");if(o)return o;return t.closest("bkkr-root,bkkr-page,.bkkr-page,page-inner,.popover-content")||(t=>t.parentElement?t.parentElement:t.parentNode&&t.parentNode.host?t.parentNode.host:null)(t)},p=(t,o,i,r)=>{const s=t.currentX,a=t.currentY,n=o.scrollLeft,l=o.scrollTop,e=i-t.currentTime;if(r&&(t.startTime=i,t.startX=n,t.startY=l,t.velocityX=t.velocityY=0),t.currentTime=i,t.currentX=t.scrollLeft=n,t.currentY=t.scrollTop=l,t.deltaX=n-t.startX,t.deltaY=l-t.startY,e>0&&e<100){const o=(l-a)/e;t.velocityX=(n-s)/e*.7+.3*t.velocityX,t.velocityY=.7*o+.3*t.velocityY}};h.style=":host{--background:var(--background, var(--bkkr-background-color, #fff));--color:var(--color, var(--bkkr-text-color, #000));--offset-top:0px;--offset-bottom:0px;--padding-top:calc(var(--bkkr-spacer, 16px));--padding-end:0;--padding-bottom:calc(var(--bkkr-spacer, 16px));--padding-start:0;--offset-top:0px;--offset-bottom:0px;--overflow:auto;--scrollbar-gutter:stable both-edges;display:block;position:relative;-ms-flex:1;flex:1;-ms-flex-order:0;order:0;max-width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--bkkr-font-family);contain:size style}.inner-scroll{top:calc(var(--offset-top) * -1);right:0px;bottom:calc(var(--offset-bottom) * -1);left:0px;padding-left:var(--padding-start);padding-right:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset, 0px) + var(--offset-bottom));position:absolute;background-color:var(--background);color:var(--color);overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-ms-touch-action:manipulation;touch-action:manipulation}@supports ((-webkit-margin-start: 0) or (margin-inline-start: 0)) or (-webkit-margin-start: 0){.inner-scroll{padding-left:unset;padding-right:unset;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end)}}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;will-change:scroll-position, transform;scrollbar-gutter:var(--scrollbar-gutter)}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}";export{h as bkkr_content}